<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
 <head>
  <title>
   Dimension by HTML5 UP
  </title>
  <!-- <meta charset="utf-8" /> -->
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" /> -->
  <meta charset="utf-8"/>
  <meta content="width=device-width,initial-scale=1.0" name="viewport"/>
  <link href="../../assets/css/article.css" rel="stylesheet"/>
  <noscript>
   <link href="../../assets/css/noscript.css" rel="stylesheet"/>
  </noscript>
 </head>
 <body>
  <div id="app">
  </div>
  <!-- built files will be auto injected -->
 </body>
 <body class="is-article-visible">
  <!--	<body class="is-preload">-->
  <!-- Wrapper -->
  <div id="wrapper">
   <nav>
    <ul>
     <li>
      <a href="#intro">
       主页
      </a>
     </li>
     <li>
      <a href="#experience">
       文章列表
      </a>
     </li>
    </ul>
   </nav>
   <article class="active" id="article" style="display: block">
    <h1>
     Spring boot Gradle项目搭建
    </h1>
    <hr/>
    <h3>
     使用IDEA创建Gradle工程
    </h3>
    <p>
     操作大致为：File-&gt;new-&gt;Project-&gt;Gradle(在左侧选项栏中)
    </p>
    <p>
     创建常规以后生成的工程目录如下：
    </p>
    <ul>
     <li>
      build
     </li>
     <li>
      gradle
      <ul>
       <li>
        wrapper
        <ul>
         <li>
          gradle-wrapper.jar
         </li>
         <li>
          gradle-wrapper.properties
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li>
      src
      <ul>
       <li>
        java
       </li>
       <li>
        resources
       </li>
      </ul>
     </li>
     <li>
      test
      <ul>
       <li>
        java
       </li>
       <li>
        resources
       </li>
      </ul>
     </li>
     <li>
      build.gradle
     </li>
     <li>
      gradlew
     </li>
     <li>
      gradlew.bat
     </li>
     <li>
      settings.gradle
     </li>
    </ul>
    <h3>
     配置Spring boot
    </h3>
    <p>
     下面需要对两个文件进行编辑：
    </p>
    <p>
     build.gradle文件修改后的内容如下,依赖一般是前面是groupId，中间是artifactId，第三个一般是版本。在repositories配置使用阿里云的仓库，避免下载过慢。
    </p>
    <p>
     ```bash
plugins {
    id 'java'
    id 'com.gradle.build-scan' version '2.0.2'
    id 'org.springframework.boot' version '2.0.5.RELEASE'
    id 'io.spring.dependency-management' version '1.0.7.RELEASE'
}
    </p>
    <p>
     group 'seckill'
version '1.0-SNAPSHOT'
    </p>
    <p>
     sourceCompatibility = 1.8
    </p>
    <p>
     repositories {
    maven { url "http://maven.aliyun.com/nexus/content/groups/public/" }
    mavenCentral()
}
    </p>
    <p>
     dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
    </p>
    <pre><pre>implementation 'org.springframework.boot:spring-boot-dependencies:2.0.5.RELEASE'
implementation 'org.springframework.boot:spring-boot-starter-web'

testImplementation 'org.springframework.boot:spring-boot-starter-test'

components {
    withModule('org.springframework:spring-beans') {
        allVariants {
            withDependencyConstraints {
                // Need to patch constraints because snakeyaml is an optional dependency
                it.findAll { it.name == 'snakeyaml' }.each { it.version { strictly '1.19' } }
            }
        }
    }
}
</pre></pre>
    <p>
     }
    </p>
    <p>
     buildScan {
    </p>
    <pre><pre>// always accept the terms of service
termsOfServiceUrl = 'https://gradle.com/terms-of-service'
termsOfServiceAgree = 'yes'

// always publish a build scan
publishAlways()
</pre></pre>
    <p>
     }
```
    </p>
    <p>
     setting.gradle文件修改后的内容如下：
    </p>
    <p>
     <pre>bash
rootProject.name = 'seckill'
enableFeaturePreview('IMPROVED_POM_SUPPORT')</pre>
    </p>
    <h3>
     编写类
    </h3>
    <p>
     首先在src/java下生成源码目录com.seckill.spring(相当于com/seckill/spring)
    </p>
    <p>
     在src/java下创建程序入口类Application.java,其内容如下：
    </p>
    <p>
     ```java
package com.seckill.spring;
    </p>
    <p>
     import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
    </p>
    <p>
     @SpringBootApplication
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```
    </p>
    <p>
     在src/java/com.seckill.spring下创建目录controllers，并在controllers目录创建类：HelloWorld，在其中定义根路由并返回Hello World，其代码如下：
    </p>
    <p>
     ```java
package com.seckill.spring.controllers;
    </p>
    <p>
     import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RestController;
    </p>
    <p>
     import java.util.HashMap;
import java.util.Map;
    </p>
    <p>
     @RestController
public class HelloWorld {
    @RequestMapping(value = "/", method = RequestMethod.GET)
    public Map helloWorld() {
        Map
     <string, object="">
      ret = new HashMap&lt;&gt;();
        ret.put("ret", "Hello World");
        return ret;
    }
}
```
     </string,>
    </p>
    <h3>
     单元测试
    </h3>
    <p>
     使用spring boot mockMVC测试非常方便
    </p>
    <p>
     ```java
package pre.controllers;
    </p>
    <p>
     import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.test.web.servlet.MockMvc;
    </p>
    <p>
     import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;
    </p>
    <p>
     @RunWith(SpringRunner.class)
@WebMvcTest
public class HelloWorldTest {
    @Autowired
    private MockMvc mockMvc;
    </p>
    <pre><pre>@Test
public void helloWorld() throws Exception {
    this.mockMvc.perform(get("/"))
            .andExpect(status().isOk())
            .andExpect(content().json("{'ret': 'Hello World'}"));
}
</pre></pre>
    <p>
     }
```
    </p>
    <h3>
     运行访问
    </h3>
    <ul>
     <li>
      运行Application类，可以在控制台看到起默认监听在8080端口
     </li>
     <li>
      浏览器访问:localhost:8080,可以看到返回字符串Hello World
     </li>
    </ul>
    <h2>
     参考链接
    </h2>
    <ul>
     <li>
      <a href="https://guides.gradle.org/building-spring-boot-2-projects-with-gradle/">
       1.Building Spring Boot 2 Applications with Gradle
      </a>
     </li>
     <li>
      <a href="https://www.baeldung.com/spring-boot">
       2.Learn Spring Boot
      </a>
     </li>
     <li>
      <a href="https://spring.io/guides/gs/rest-service/">
       3.Building a RESTful Web Service
      </a>
     </li>
     <li>
      <a href="https://blog.csdn.net/ZZY1078689276/article/details/80364726">
       Gradle配置阿里云Maven镜像仓库地址
      </a>
     </li>
     <li>
      <a href="https://howtodoinjava.com/spring-boot2/spring-boot-mockmvc-example/">
       Spring boot MockMVC example
      </a>
     </li>
     <li>
      <a href="https://www.cnblogs.com/xiaoqi/p/6955288.html">
       Spring Boot配置文件放在jar外部
      </a>
     </li>
    </ul>
   </article>
  </div>
  <!-- BG -->
  <div id="bg">
  </div>
  <!-- Scripts -->
  <script src="../../assets/js/jquery.min.js">
  </script>
  <script src="../../assets/js/browser.min.js">
  </script>
  <script src="../../assets/js/breakpoints.min.js">
  </script>
  <script src="../../assets/js/util.js">
  </script>
  <script src="../../assets/js/main.js">
  </script>
 </body>
</html>
