<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
 <head>
  <title>
   Dimension by HTML5 UP
  </title>
  <!-- <meta charset="utf-8" /> -->
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" /> -->
  <meta charset="utf-8"/>
  <meta content="width=device-width,initial-scale=1.0" name="viewport"/>
  <link href="../../assets/css/article.css" rel="stylesheet"/>
  <link href="https://cdn.bootcss.com/highlight.js/9.15.8/styles/github.min.css" rel="stylesheet"/>
  <noscript>
   <link href="../../assets/css/noscript.css" rel="stylesheet"/>
  </noscript>
 </head>
 <body>
  <div id="app">
  </div>
  <!-- built files will be auto injected -->
 </body>
 <body class="is-preload">
  <!-- Wrapper -->
  <div id="wrapper">
   <!-- Main -->
   <div id="main">
    <article id="article">
     <h1 id="k8s-minikube">
      K8s ä¹‹ Minikube åˆæ­¥ä½“éªŒ
     </h1>
     <hr/>
     <p>
      è¿™æ˜¯æˆ‘å‚ä¸2022é¦–æ¬¡æ›´æ–‡æŒ‘æˆ˜çš„ç¬¬21å¤©ï¼Œæ´»åŠ¨è¯¦æƒ…æŸ¥çœ‹ï¼š
      <a href="https://juejin.cn/post/7052884569032392740">
       2022é¦–æ¬¡æ›´æ–‡æŒ‘æˆ˜
      </a>
     </p>
     <h2 id="_1">
      ç®€ä»‹
     </h2>
     <p>
      ç›®å‰æƒ³å­¦ä¹ å’Œäº†è§£äº‘åŸç”Ÿç›¸å…³çš„ä¸œè¥¿ï¼Œé¦–é€‰å°±æ˜¯K8sï¼Œåœ¨å®˜ç½‘ä¸Šä»‹ç»Minikubeæ˜¯ä¸€ä¸ªå•ä½“ç®€å•çš„ï¼Œå¯ä»¥ç”¨äºå¿«é€Ÿå…¥é—¨çš„ä¸œè¥¿ï¼Œç”±äºåœ¨æœ¬ç¯‡æ–‡ç« ä¸­æ¢ç´¢ä¸‹
     </p>
     <h2 id="_2">
      å®‰è£…è¿è¡Œ
     </h2>
     <p>
      æœ¬äººæ˜¯Win11ç³»ç»Ÿï¼Œä¸‹é¢çš„è®²è§£ä¹Ÿéƒ½æ˜¯åŸºäºWin11çš„,è®°å¾—å®‰è£…ç›¸åº”çš„Dockerç¯å¢ƒ
     </p>
     <p>
      åœ¨ä¸‹é¢çš„é“¾æ¥ä¸­ï¼Œæœ‰ç›¸å…³ç³»ç»Ÿçš„ä¸‹è½½åœ°å€ï¼Œä¸‹è½½åæŒ‰ç…§å³å¯ï¼š
     </p>
     <ul>
      <li>
       <a href="https://minikube.sigs.k8s.io/docs/start/">
        minikube start
       </a>
      </li>
     </ul>
     <p>
      ç”±äºæ‡’ï¼Œæ²¡æœ‰è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç›´æ¥è¿›å…¥å®‰è£…ç›®å½•ï¼Œè¿è¡Œå‘½ä»¤ï¼š
     </p>
     <div class="codehilite">
      <pre><span></span><code><span class="nb">cd</span> D:<span class="se">\S</span>oftWare<span class="se">\K</span>ubernetes<span class="se">\M</span>inikube<span class="se">\</span>
.<span class="se">\m</span>inikube.exe start
</code></pre>
     </div>
     <p>
      éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œéœ€æ±‚å»ä¸‹è½½å’Œæ‹‰å–é•œåƒï¼Œå®Œæˆåè¾“å‡ºå¦‚ä¸‹ï¼Œä¸å¾—ä¸è¯´ï¼Œå“ªäº›è¡¨æƒ…è¿˜æŒºèŠ±é‡Œèƒ¡å“¨çš„ï¼Œåé¢æ‰“ç®—ç ”ç©¶ä¸‹ï¼Œè¿™ä¸ªæ˜¯æ€ä¹ˆæå‡ºæ¥çš„ï¼
     </p>
     <div class="codehilite">
      <pre><span></span><code>D:\SoftWare\Kubernetes\Minikube&gt; .\minikube.exe start
ğŸ˜„  Microsoft Windows 11 Home China 10.0.22000 Build 22000 ä¸Šçš„ minikube v1.25.1
âœ¨  è‡ªåŠ¨é€‰æ‹© docker é©±åŠ¨
ğŸ‘  Starting control plane node minikube in cluster minikube
ğŸšœ  Pulling base image ...
ğŸ’¾  Downloading Kubernetes v1.23.1 preload ...
    &gt; preloaded-images-k8s-v16-v1...: 504.42 MiB / 504.42 MiB  100.00% 8.40 MiB
    &gt; index.docker.io/kicbase/sta...: 378.98 MiB / 378.98 MiB  100.00% 1.76 MiB
â—  minikube was unable to download gcr.io/k8s-minikube/kicbase:v0.0.29, but successfully downloaded docker.io/kicbase/stable:v0.0.29 as a fallback image
ğŸ”¥  Creating docker container (CPUs=2, Memory=8000MB) ...
â—  This container is having trouble accessing https://k8s.gcr.io
ğŸ’¡  To pull new external images, you may need to configure a proxy: https://minikube.sigs.k8s.io/docs/reference/networking/proxy/
ğŸ³  æ­£åœ¨ Docker 20.10.12 ä¸­å‡†å¤‡ Kubernetes v1.23.1â€¦
    â–ª kubelet.housekeeping-interval=5m
    â–ª Generating certificates and keys ...
    â–ª Booting up control plane ...
    â–ª Configuring RBAC rules ...
ğŸ”  Verifying Kubernetes components...
    â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5
ğŸŒŸ  Enabled addons: storage-provisioner, default-storageclass
ğŸ„  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default
</code></pre>
     </div>
     <p>
      è·Ÿç€æ•™ç¨‹å‘½ä»¤è¾“å‡ºä¸€ä¸‹ï¼Œçœ‹çœ‹å·²ç»å†…ç½®å¾ˆå¤šçš„ä¸œè¥¿
     </p>
     <p>
      å…³é”®çš„ä¸€ç‚¹æ˜¯ï¼Œåœ¨ç³»ç»Ÿä¸­ä½¿ç”¨docker pså‘½ä»¤ï¼Œå¹¶æ²¡æœ‰çœ‹åˆ°è¿™äº›å®¹å™¨ï¼Œæ„Ÿè§‰ä¸æ˜¯ç”¨dockerå»åˆ›å»ºçš„ï¼Œæœ‰ç‚¹åƒç›´æ¥ç”¨RunCä¹‹ç±»æçš„ï¼Œæ²¡æœ‰å…³è”åˆ°Dockerï¼Œå‰å‡ å¤©è¡¥äº†ç‚¹çŸ¥è¯†ï¼Œåé¢ç ”ç©¶ä¸‹
     </p>
     <div class="codehilite">
      <pre><span></span><code>D:<span class="se">\S</span>oftWare<span class="se">\K</span>ubernetes<span class="se">\M</span>inikube&gt; kubectl get po -A
NAMESPACE     NAME                               READY   STATUS    RESTARTS      AGE
kube-system   coredns-64897985d-kk2ct            <span class="m">1</span>/1     Running   <span class="m">0</span>             31s
kube-system   etcd-minikube                      <span class="m">1</span>/1     Running   <span class="m">0</span>             42s
kube-system   kube-apiserver-minikube            <span class="m">1</span>/1     Running   <span class="m">0</span>             45s
kube-system   kube-controller-manager-minikube   <span class="m">1</span>/1     Running   <span class="m">0</span>             42s
kube-system   kube-proxy-x2lp5                   <span class="m">1</span>/1     Running   <span class="m">0</span>             31s
kube-system   kube-scheduler-minikube            <span class="m">1</span>/1     Running   <span class="m">0</span>             42s
kube-system   storage-provisioner                <span class="m">1</span>/1     Running   <span class="m">1</span> <span class="o">(</span>24s ago<span class="o">)</span>   39s
</code></pre>
     </div>
     <p>
      ç„¶åæ˜¯å¼€å¯ç½‘é¡µç®¡ç†
     </p>
     <div class="codehilite">
      <pre><span></span><code>D:<span class="se">\S</span>oftWare<span class="se">\K</span>ubernetes<span class="se">\M</span>inikube&gt; .<span class="se">\m</span>inikube.exe dashboard
ğŸ”Œ  æ­£åœ¨å¼€å¯ dashboard ...
    â–ª Using image kubernetesui/dashboard:v2.3.1
    â–ª Using image kubernetesui/metrics-scraper:v1.0.7
ğŸ¤”  æ­£åœ¨éªŒè¯ dashboard è¿è¡Œæƒ…å†µ ...
ğŸš€  Launching proxy ...
ğŸ¤”  æ­£åœ¨éªŒè¯ proxy è¿è¡ŒçŠ¶å†µ ...
ğŸ‰  Opening http://127.0.0.1:64442/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/ in your default browser...
</code></pre>
     </div>
     <p>
      ç•Œé¢ç¬¬ä¸€æ„Ÿè§‰è¿˜ä¸é”™
     </p>
     <p>
      <img alt="image.png" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c67d48df59d64b6c9e2b330ce8cc25fb~tplv-k3u1fbpfcp-watermark.image?"/>
     </p>
     <h2 id="_3">
      éƒ¨ç½²ä¸è¿è¡Œåº”ç”¨
     </h2>
     <p>
      æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯•ç€éƒ¨ç½²è¿è¡Œä¸€ä¸ªåº”ç”¨ï¼Œæ•™ç¨‹ä¸­çš„ç¤ºä¾‹è¿è¡Œä¸åŠ¨ï¼Œå¥½åƒæ˜¯ç½‘ç»œè®¿é—®æœ‰é—®é¢˜ï¼Œæˆ‘è‡ªå·±ä¸Šä¼ äº†ä¸€ä¸ªç®€å•çš„goçš„HTTPæœåŠ¡é•œåƒï¼Œç”¨äºå°è¯•ï¼Œä½ ä»¬ä¹Ÿå¯ä»¥ç›´æ¥pullä¸‹æ¥ï¼Œåº”ç”¨å·²ç»ä¸Šä¼ åˆ°docker hubä¸­äº†
     </p>
     <p>
      ä¸‹é¢çš„å‘½ä»¤æ˜¯ï¼š
     </p>
     <ul>
      <li>
       éƒ¨ç½²è¿è¡Œåº”ç”¨ï¼šåç§° http-example-go å’Œå¯¹åº”çš„é•œåƒ
      </li>
      <li>
       åº”ç”¨æš´éœ²çš„æœåŠ¡ç«¯å£ï¼š8080
      </li>
      <li>
       ç±»ä¼¼docker çš„ -pï¼Œæ˜ å°„ç«¯å£åˆ°å®¿ä¸»æœº
      </li>
     </ul>
     <div class="codehilite">
      <pre><span></span><code>kubectl.exe create deployment http-example-go --image<span class="o">=</span>lw1243925457/http_example:v1
kubectl.exe expose deployment http-example-go --type<span class="o">=</span>NodePort --port<span class="o">=</span><span class="m">8080</span>

kubectl.exe port-forward service/http-example-go <span class="m">8080</span>:8080

Forwarding from <span class="m">127</span>.0.0.1:8080 -&gt; <span class="m">8080</span>
Forwarding from <span class="o">[</span>::1<span class="o">]</span>:8080 -&gt; <span class="m">8080</span>
Handling connection <span class="k">for</span> <span class="m">8080</span>
Handling connection <span class="k">for</span> <span class="m">8080</span>
Handling connection <span class="k">for</span> <span class="m">8080</span>
</code></pre>
     </div>
     <p>
      ç„¶åæˆ‘ä»¬å°±å¯ä»¥è®¿é—®äº†: http://127.0.0.1:8080/v1/hello
     </p>
     <h2 id="_4">
      æ€»ç»“
     </h2>
     <p>
      æœ¬ç¯‡ä»‹ç»äº†Minicubeçš„åˆæ­¥ä½“éªŒä½¿ç”¨ï¼Œç›®å‰è¿˜æ²¡æœ‰æ„Ÿå—åˆ°K8sçš„å¼ºå¤§ï¼Œå¾—ç»§ç»­ç ”ç©¶å’Œå­¦ä¹ 
     </p>
     <p>
      åé¢å°è¯•éƒ¨ç½²K8sé›†ç¾¤ï¼Œçœ‹çœ‹å’Œå•ä½“æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œéƒ¨ç½²åº”ç”¨ä¹‹ç±»çš„æ–¹ä¸æ–¹ä¾¿
     </p>
     <h2 id="_5">
      å‚è€ƒé“¾æ¥
     </h2>
     <ul>
      <li>
       <a href="https://minikube.sigs.k8s.io/docs/start/">
        minikube start
       </a>
      </li>
      <li>
       <a href="https://kubernetes.io/docs/tutorials/hello-minikube/">
        Hello Minikube
       </a>
      </li>
      <li>
       <a href="https://kubernetes.io/docs/tutorials/kubernetes-basics/deploy-app/deploy-interactive/">
        Interactive Tutorial - Deploying an App
       </a>
      </li>
     </ul>
    </article>
   </div>
   <!-- Footer -->
   <footer id="footer">
    <p class="copyright">
     Â© Untitled. Design:
     <a href="https://html5up.net">
      HTML5 UP
     </a>
     .
    </p>
   </footer>
  </div>
  <!-- BG -->
  <div id="bg">
  </div>
  <!-- Scripts -->
  <script src="../assets/js/jquery.min.js">
  </script>
  <script src="../assets/js/browser.min.js">
  </script>
  <script src="../assets/js/breakpoints.min.js">
  </script>
  <script src="../assets/js/util.js">
  </script>
  <script src="../assets/js/main.js">
  </script>
 </body>
</html>
